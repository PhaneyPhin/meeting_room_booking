(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f00b14c"],{a1de:function(t,e,i){},b8ce:function(t,e,i){"use strict";var s=i("a1de"),a=i.n(s);a.a},f3d1:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.renderComponent?i("div",{staticClass:"vx-col w-full mb-base"},[i("vx-card",[i("vs-tabs",[i("vs-tab",{attrs:{label:t.$t("Building Data")}},[i("div",{staticClass:"mt-3"},[i("vs-table",{attrs:{pagination:"","max-items":"10",search:"",data:t.buildings},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,function(e,s){return i("vs-tr",{key:s,attrs:{data:e}},[i("vs-td",{attrs:{data:e.building_id}},[i("div",{staticClass:"text-center",staticStyle:{width:"100px"}},[t._v(t._s(e.building_id))])]),i("vs-td",{attrs:{data:e.building_name}},[t._v(t._s(e.building_name))]),i("vs-td",{staticClass:"text-center aligin-center",attrs:{data:e.num_floor}},[t._v(t._s(e.num_floor))]),i("vs-td",{attrs:{data:e.address}},[t._v(t._s(e.address+" "+e["tambon_"+t.$i18n.locale]+" "+e["amphur_"+t.$i18n.locale]+" "+e["province_"+t.$i18n.locale]))]),i("vs-td",[i("feather-icon",{staticClass:"cursor-pointer w-6 h-6 text-warning",attrs:{icon:"EditIcon",size:"small"},on:{click:function(i){return t.edit(e)}}})],1),i("vs-td",[i("feather-icon",{staticClass:"cursor-pointer w-6 h-6 text-danger",attrs:{icon:"Trash2Icon",size:"small"},on:{click:function(i){return t.delete_building(e)}}})],1)],1)})}}],null,!1,3008596556)},[i("template",{slot:"thead"},[i("vs-th",{staticClass:"text-center",attrs:{"sort-key":"building_id"}},[t._v(t._s(t.$t("Building ID")))]),i("vs-th",{attrs:{"sort-key":"building_name"}},[t._v(t._s(t.$t("Building Name")))]),i("th",{staticClass:"text-center aligin-center",attrs:{"sort-key":"num_floor"}},[t._v(t._s(t.$t("Number of Floor")))]),i("vs-th",{attrs:{"sort-key":"address"}},[t._v(t._s(t.$t("Address")))]),i("vs-th",[t._v(t._s(t.$t("edit")))]),i("vs-th",[t._v(t._s(t.$t("delete")))])],1)],2)],1)]),i("vs-tab",{attrs:{label:t.$t("Add Building")}},[i("div",{staticClass:"mt-3"},[i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col md:w-1/2 mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("Building Name")))]),i("vs-input",{staticClass:"w-full",attrs:{danger:t.invalid.building_name},model:{value:t.editObj.building_name,callback:function(e){t.$set(t.editObj,"building_name",e)},expression:"editObj.building_name"}}),t.invalid.building_name?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please input building name")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-1/2 mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("Address")))]),i("vs-input",{staticClass:"w-full",attrs:{danger:t.invalid.address},model:{value:t.editObj.address,callback:function(e){t.$set(t.editObj,"address",e)},expression:"editObj.address"}}),t.invalid.address?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please input address")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-1/4 mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("Province")))]),i("vs-select",{staticClass:"w-full",attrs:{danger:t.invalid.province},model:{value:t.editObj.province,callback:function(e){t.$set(t.editObj,"province",e)},expression:"editObj.province"}},t._l(t.provinces_view,function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.val,text:t.name}})}),1),t.invalid.province?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please select province")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-1/4 mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("District")))]),i("vs-select",{staticClass:"w-full",attrs:{danger:t.invalid.amphur},model:{value:t.editObj.amphur,callback:function(e){t.$set(t.editObj,"amphur",e)},expression:"editObj.amphur"}},t._l(t.amphurs_view,function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.val,text:t.name}})}),1),t.invalid.amphur?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please select district")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-1/4 mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("Sub District")))]),i("vs-select",{staticClass:"w-full",attrs:{danger:t.invalid.tambon},model:{value:t.editObj.tambon,callback:function(e){t.$set(t.editObj,"tambon",e)},expression:"editObj.tambon"}},t._l(t.tambons_view,function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.val,text:t.name}})}),1),t.invalid.tambon?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please select sub district")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-1/4 mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("PostCode")))]),i("vs-select",{staticClass:"w-full",attrs:{danger:t.invalid.admin_id},model:{value:t.editObj.admin_id,callback:function(e){t.$set(t.editObj,"admin_id",e)},expression:"editObj.admin_id"}},t._l(t.postcodes,function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.admin_id,text:t.postcode}})}),1),t.invalid.tambon?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please select postcode")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-1/3 mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("Number of Floor")))]),i("vs-input",{staticClass:"w-full",attrs:{danger:t.invalid.num_floor,maxlength:"3"},on:{keypress:t.checkNumber},model:{value:t.editObj.num_floor,callback:function(e){t.$set(t.editObj,"num_floor",e)},expression:"editObj.num_floor"}}),t.invalid.num_floor?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("plese input floor number")))]):t._e()],1)])]),i("div",{staticClass:"mt-5"},[i("div",{staticClass:"vx-row"},[i("div",{staticClass:"w-full"},[i("vs-button",{staticClass:"right",attrs:{color:"danger",type:"border"},on:{click:function(e){return t.forceRerender()}}},[t._v(t._s(t.$t("cancel")))]),i("vs-button",{ref:"loadableButton",staticClass:"vs-con-loading__container right",attrs:{id:"button-with-loading",vslor:"primary"},on:{click:t.save}},[t._v(t._s(t.$t("save")))])],1)])])])],1),i("vs-popup",{staticClass:"holamundo",attrs:{title:t.$t("edit_title"),active:t.popupActive},on:{"update:active":function(e){t.popupActive=e}}},[i("div",{staticClass:"mt-3"},[i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col md:w-full mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("Building Name")))]),i("vs-input",{staticClass:"w-full",attrs:{danger:t.invalid.building_name},model:{value:t.editObj.building_name,callback:function(e){t.$set(t.editObj,"building_name",e)},expression:"editObj.building_name"}}),t.invalid.building_name?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please input building name")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-full mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("Address")))]),i("vs-input",{staticClass:"w-full",attrs:{danger:t.invalid.address},model:{value:t.editObj.address,callback:function(e){t.$set(t.editObj,"address",e)},expression:"editObj.address"}}),t.invalid.address?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please input address")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-full mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("Province")))]),i("vs-select",{staticClass:"w-full",attrs:{danger:t.invalid.province},model:{value:t.editObj.province,callback:function(e){t.$set(t.editObj,"province",e)},expression:"editObj.province"}},t._l(t.provinces_view,function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.val,text:t.name}})}),1),t.invalid.province?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please select province")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-full mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("District")))]),i("vs-select",{staticClass:"w-full",attrs:{danger:t.invalid.amphur},model:{value:t.editObj.amphur,callback:function(e){t.$set(t.editObj,"amphur",e)},expression:"editObj.amphur"}},t._l(t.amphurs_view,function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.val,text:t.name}})}),1),t.invalid.amphur?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please select district")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-full mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("Sub District")))]),i("vs-select",{staticClass:"w-full",attrs:{danger:t.invalid.tambon},model:{value:t.editObj.tambon,callback:function(e){t.$set(t.editObj,"tambon",e)},expression:"editObj.tambon"}},t._l(t.tambons_view,function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.val,text:t.name}})}),1),t.invalid.tambon?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please select sub district")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-full mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("PostCode")))]),i("vs-select",{staticClass:"w-full",attrs:{danger:t.invalid.admin_id},model:{value:t.editObj.admin_id,callback:function(e){t.$set(t.editObj,"admin_id",e)},expression:"editObj.admin_id"}},t._l(t.postcodes,function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.admin_id,text:t.postcode}})}),1),t.invalid.tambon?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("please select postcode")))]):t._e()],1),i("div",{staticClass:"vx-col md:w-full mt-5"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("Number of Floor")))]),i("vs-input",{staticClass:"w-full",attrs:{danger:t.invalid.num_floor},on:{keypress:t.checkNumber},model:{value:t.editObj.num_floor,callback:function(e){t.$set(t.editObj,"num_floor",e)},expression:"editObj.num_floor"}}),t.invalid.num_floor?i("div",{staticClass:"errors"},[t._v(t._s(t.$t("plese input floor number")))]):t._e()],1)])]),i("div",{staticClass:"mt-5"},[i("div",{staticClass:"vx-row"},[i("div",{staticClass:"w-full"},[i("vs-button",{ref:"loadableButton",staticClass:"vs-con-loading__container mr-4 ml-4",attrs:{id:"button-with-loading",vslor:"primary"},on:{click:t.save_edit}},[t._v(t._s(t.$t("save")))]),i("vs-button",{attrs:{color:"danger",type:"border"},on:{click:function(e){t.popupActive=!1}}},[t._v(t._s(t.$t("cancel")))])],1)])])])],1)],1):t._e()},a=[],n=(i("96cf"),i("3040")),r=(i("ac6a"),i("fa33")),o=i("67cf"),l=i("fbea"),c=(i("c1df"),i("4be7"),{components:{EditUser:l["a"],Datepicker:r["a"]},data:function(){return{colorLoading:"#ff8000",renderComponent:!0,sideBarActive:!1,editing:!1,popupActive:!1,buildings:[],submitted:!1,provinces:[],tambons:[],amphurs:[],postcodes:[],editObj:{}}},computed:{invalid:function(){var t=this,e=function(e){var i={};return e.forEach(function(e){""==t.editObj[e]&&t.submitted?i[e]=!0:i[e]=!1}),i};return e(["province","tambon","amphur","admin_id","building_name","num_floor","address"])},isInvald:function(){var t=!1;for(var e in this.invalid)this.invalid[e]&&(t=!0);return t},provinces_view:function(){var t=this;return this.provinces.map(function(e){return{val:e.province_en,name:e["province_"+t.$i18n.locale]}})},amphurs_view:function(){var t=this;return this.amphurs.map(function(e){return{val:e.amphur_en,name:e["amphur_"+t.$i18n.locale]}})},tambons_view:function(){var t=this;return this.tambons.map(function(e){return{val:e.tambon_en,name:e["tambon_"+t.$i18n.locale]}})}},created:function(){this.getdata(),this.initVal()},methods:{initVal:function(){this.submitted=!1,this.popupActive=!1,this.editObj={admin_id:"",tambon:"",amphur:"",province:"",building_name:"",num_floor:"",address:""}},checkNumber:function(t){var e=window.checkNumber(t);e||t.preventDefault()},getdata:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].postData("building/getBuilding",{});case 3:return e=t.sent,this.buildings=e.data,t.next=7,o["a"].postData("building/getLocation",{province:"all",amphur:"",tambon:"",postcode:""});case 7:i=t.sent,this.provinces=i.data,t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}(),edit:function(t){this.editing=!0,this.popupActive=!0,this.editObj={building_id:t.building_id,building_name:t.building_name,num_floor:t.num_floor,province:t.province_en,amphur:t.amphur_en,tambon:t.tambon_en,admin_id:t.admin_id,address:t.address},console.log(this.editObj),this.getAmphur(),this.getTambon(),this.getPostCode(),this.editing=!1},save:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.submitted=!0,this.isInvald){t.next=14;break}return t.prev=2,t.next=5,o["a"].postData("building/addBuilding",this.editObj);case 5:return t.next=7,this.$swal(this.$t("success_title"),"","success");case 7:this.getdata(),this.forceRerender(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[2,11]])}));return function(){return t.apply(this,arguments)}}(),save_edit:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.submitted=!0,this.isInvald){t.next=23;break}return this.$vs.loading({color:this.colorLoading}),t.prev=3,t.next=6,o["a"].postData("building/updateBuilding",this.editObj);case 6:return this.popupActive=!1,this.$vs.loading.close(),t.next=10,this.$swal(this.$t("success_title"),"","success");case 10:this.getdata(),this.forceRerender(),t.next=23;break;case 14:return t.prev=14,t.t0=t["catch"](3),console.log("catching error"),this.popupActive=!1,this.$vs.loading.close(),t.next=21,this.$swal("error",t.t0.message,"error");case 21:this.popupActive=!0,console.log(t.t0);case 23:case"end":return t.stop()}},t,this,[[3,14]])}));return function(){return t.apply(this,arguments)}}(),forceRerender:function(){var t=this;this.renderComponent=!1,this.$nextTick(function(){t.initVal(),t.renderComponent=!0})},delete_building:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$swal({title:this.$t("Are your sure to delete this building?"),text:this.$t("delete_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("cancel"),confirmButtonText:this.$t("confirm_delete"),showLoaderOnConfirm:!0,preConfirm:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].postData("/building/deleteBuilding",e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(){return t.apply(this,arguments)}}()});case 2:if(i=t.sent,!i.value){t.next=14;break}if(1!=i.value.code){t.next=12;break}return t.next=7,this.$swal(this.$t("deleted_title"),"","success");case 7:this.getdata(),this.forceRerender(),this.initVal(),t.next=14;break;case 12:return t.next=14,this.$swal(this.$t("error"),i.value.message,"error");case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getAmphur:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].postData("building/getLocation",{province:this.editObj.province,amphur:"all",tambon:"",postcode:""});case 2:e=t.sent,this.amphurs=e.data;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getTambon:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].postData("building/getLocation",{province:this.editObj.province,amphur:this.editObj.amphur,tambon:"all",postcode:""});case 2:e=t.sent,this.tambons=e.data;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getPostCode:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].postData("building/getLocation",{province:this.editObj.province,amphur:this.editObj.amphur,tambon:this.editObj.tambon,postcode:"all"});case 2:e=t.sent,this.postcodes=e.data,1==this.postcodes.length&&(this.editObj.admin_id=this.postcodes[0].admin_id);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},watch:{popupActive:function(t){t||this.initVal()},"editObj.province":function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:""==e||this.editing||(this.editObj.postcode="",this.getAmphur());case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),"editObj.amphur":function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:""==e||this.editing||this.getTambon();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),"editObj.tambon":function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:""==e||this.editing||this.getPostCode();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}),d=c,u=(i("b8ce"),i("2877")),v=Object(u["a"])(d,s,a,!1,null,"b0ebda62",null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-9f00b14c.5dea5ec8.js.map