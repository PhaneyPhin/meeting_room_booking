(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81ef7b5c"],{"40a4":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.renderComponent?e("div",{staticClass:"vx-col w-full mb-base"},[e("vx-card",[e("h6",[t._v(t._s(t.$t("search_booking_history")))]),e("div",{staticClass:"mt-6 vx-row mb-6"},[e("div",{staticClass:"vx-col md:w-1/6",staticStyle:{"text-align":"right","padding-top":"3px"}},[e("label",[t._v(t._s(t.$t("start_datetime")))])]),e("div",{staticClass:"vx-col md:w-1/5"},[e("flat-pickr",{staticClass:"w-full flatpickr-input",class:{" danger":t.invalid.start_date},attrs:{config:t.configdateTimePicker,placeholder:"Choose time"},model:{value:t.editObj.start_date,callback:function(a){t.$set(t.editObj,"start_date",a)},expression:"editObj.start_date"}})],1),e("div",{staticClass:"vx-col md:w-1/6",staticStyle:{"text-align":"right","padding-top":"3px"}},[e("label",[t._v(t._s(t.$t("end_datetime")))])]),e("div",{staticClass:"vx-col md:w-1/5"},[e("flat-pickr",{staticClass:"w-full flatpickr-input",class:{"w-full flatpickr-input danger":t.invalid.end_date},attrs:{config:t.configdateTimePicker,placeholder:"Choose time"},model:{value:t.editObj.end_date,callback:function(a){t.$set(t.editObj,"end_date",a)},expression:"editObj.end_date"}})],1),e("div",{staticClass:"vx-col md:w-1/6"},[e("vs-button",{ref:"loadableButton",staticClass:"vs-con-loading__container right",attrs:{id:"button-with-loading",vslor:"primary"},on:{click:function(a){return t.search()}}},[t._v(t._s(t.$t("search")))])],1)])]),t.searched?e("vx-card",{staticClass:"mt-5"},[e("vs-table",{attrs:{pagination:"","max-items":"10",search:"",data:t.bookings},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.data;return t._l(s,function(a,s){return e("vs-tr",{key:s,attrs:{data:a}},[e("vs-td",{attrs:{data:a.booking_id}},[t._v(t._s(a.booking_id))]),e("vs-td",{attrs:{data:a.first_name+a.last_name,width:"200px"}},[t._v(t._s(a.first_name+" "+a.last_name))]),e("vs-td",{attrs:{data:a.room_name}},[t._v(t._s(a.room_name))]),e("vs-td",{attrs:{data:a.booking_description}},[t._v(t._s(a.booking_description))]),e("vs-td",{attrs:{data:a.start_date}},[t._v(t._s(t._f("formatDate")(a.start_date)))]),e("vs-td",{attrs:{data:a.end_date}},[t._v(t._s(t._f("formatDate")(a.end_date)))]),e("vs-td",{class:"A"+a.status_id,attrs:{data:a.status_name}},[t._v(t._s(t.$t(a.status_name)))]),e("vs-td",[e("feather-icon",{staticClass:"cursor-pointer w-6 h-6 text-primary",attrs:{icon:"MaximizeIcon",size:"small"},on:{click:function(e){return t.views(a)}}})],1)],1)})}}],null,!1,2392648579)},[e("template",{slot:"thead"},[e("vs-th",{attrs:{"sort-key":"booking_id"}},[t._v(t._s(t.$t("booking_id")))]),e("vs-th",{attrs:{"sort-key":"first_name+last_name"}},[t._v(t._s(t.$t("first_surname")))]),e("vs-th",{attrs:{"sort-key":"room_name"}},[t._v(t._s(t.$t("room_name")))]),e("vs-th",{attrs:{"sort-key":"booking_description"}},[t._v(t._s(t.$t("booking_description")))]),e("vs-th",{attrs:{"sort-key":"start_date"}},[t._v(t._s(t.$t("start_date")))]),e("vs-th",{attrs:{"sort-key":"end_date"}},[t._v(t._s(t.$t("end_date")))]),e("vs-th",{attrs:{"sort-key":"status_name"}},[t._v(t._s(t.$t("status_name")))]),e("vs-th",[t._v(t._s(t.$t("view")))])],1)],2)],1):t._e(),e("vs-popup",{staticClass:"holamundo",attrs:{title:t.$t("view"),active:t.popupActive},on:{"update:active":function(a){t.popupActive=a}}},[e("div",{staticClass:"vx-row mt-5"},[e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("Officer"))+":")]),e("div",{staticClass:"vx-col md:w-3/4 value"},[t._v(t._s(t.view["department_name_"+t.$i18n.locale]))])]),e("div",{staticClass:"vx-row mt-5"},[e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("Department"))+":")]),e("div",{staticClass:"vx-col md:w-3/4 value"},[t._v(t._s(t.view["sub_department_name_"+t.$i18n.locale]))])]),e("div",{staticClass:"vx-row mt-5"},[e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("booking_description"))+":")]),e("div",{staticClass:"vx-col md:w-3/4 value"},[t._v(t._s(t.view.booking_description))])]),e("div",{staticClass:"vx-row mt-5"},[e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("booking_id"))+":")]),e("div",{staticClass:"vx-col md:w-1/4 value"},[t._v(t._s(t.view.booking_id))]),e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("first_surname"))+":")]),e("div",{staticClass:"vx-col md:w-1/4 value"},[t._v(t._s(t.view.first_name+" "+t.view.last_name))])]),e("div",{staticClass:"vx-row mt-5"},[e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("room_name"))+":")]),e("div",{staticClass:"vx-col md:w-1/4 value"},[t._v(t._s(t.view.room_name))]),e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("important"))+":")]),e("div",{staticClass:"vx-col md:w-1/4 value"},[t._v(t._s(t.view.important))])]),e("div",{staticClass:"vx-row mt-5"},[e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("Remark"))+":")]),e("div",{staticClass:"vx-col md:w-1/4 value"},[t._v(t._s(t.view.remark))]),e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("Tel"))+":")]),e("div",{staticClass:"vx-col md:w-1/4 value"},[t._v(t._s(t.view.tel))])]),e("div",{staticClass:"vx-row mt-5"},[e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("Member"))+":")]),e("div",{staticClass:"vx-col md:w-1/4 value"},[t._v(t._s(t.view.member))]),e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("booking_date"))+":")]),e("div",{staticClass:"vx-col md:w-1/4 value"},[t._v(t._s(t._f("onlyDate")(t.view.booking_date)))])]),e("div",{staticClass:"vx-row mt-5"},[e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("date"))+":")]),e("div",{staticClass:"vx-col md:w-1/4 value"},[t._v(t._s(t._f("onlyDate")(t.view.start_date)))]),e("div",{staticClass:"vx-col md:w-1/4",attrs:{align:"right"}},[t._v(t._s(t.$t("time"))+":")]),e("div",{staticClass:"vx-col md:w-1/4 value"},[t._v(t._s(t._f("onlyTime")(t.view.start_date))+"-"+t._s(t._f("onlyTime")(t.view.end_date)))])]),t.materials.length>0?e("v-template",[e("div",{staticClass:"vx-row mt-5 ml-5"},[e("strong",[t._v(t._s(t.$t("Material Detail")))])]),e("vs-table",{attrs:{pagination:"","max-items":"10",search:"",data:t.materials},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.data;return t._l(s,function(a,s){return e("vs-tr",{key:s,attrs:{data:a}},[e("vs-td",{attrs:{data:a.material_id}},[t._v(t._s(a.material_id))]),e("vs-td",{attrs:{data:a.material_name,width:"200px"}},[t._v(t._s(a.material_name))]),e("vs-td",{attrs:{data:a.material_price}},[t._v(t._s(a.material_price))]),e("vs-td",{attrs:{data:a.number}},[t._v(t._s(a.number))]),e("vs-td",{attrs:{data:a.total_price}},[t._v(t._s(a.total_price))])],1)})}}],null,!1,2323768395)},[e("template",{slot:"thead"},[e("vs-th",{attrs:{"sort-key":"material_id"}},[t._v(t._s(t.$t("material_id")))]),e("vs-th",{attrs:{"sort-key":"material_name"}},[t._v(t._s(t.$t("material_name")))]),e("vs-th",{attrs:{"sort-key":"material_price"}},[t._v(t._s(t.$t("material_price")))]),e("vs-th",{attrs:{"sort-key":"number"}},[t._v(t._s(t.$t("material_number")))]),e("vs-th",{attrs:{"sort-key":"total_price"}},[t._v(t._s(t.$t("total_price")))])],1)],2)],1):t._e()],1)],1):t._e()},i=[],n=(e("551c"),e("fa33")),o=e("67cf"),r=e("fbea"),d=e("c1df"),l=e.n(d),c=e("c38f"),v=e.n(c),_=(e("0952"),{components:{EditUser:r["a"],Datepicker:n["a"],flatPickr:v.a},data:function(){return{change_password:!1,renderComponent:!0,popupActive:!1,bookings:[],roles:[],view:{},materials:[],searched:!1,submitted:!1,configdateTimePicker:{enableTime:!1,enableSeconds:!1,noCalendar:!1},editObj:{start_date:l()().format("YYYY-MM-DD"),end_date:l()().format("YYYY-MM-DD")}}},computed:{invalid:function(){var t=this,a=function(a){return t.submitted&&""==t.editObj[a]};return{start_date:a("start_date"),end_date:a("end_date")}},isInvald:function(){return this.invalid.start_date||this.invalid.end_date}},created:function(){this.getdata(),this.initVal()},methods:{initVal:function(){this.submitted=!1,this.change_password=!1},views:function(t){var a=this;this.popupActive=!0,this.view=t,o["a"].postData("/get_booked_material",{booking_id:t.booking_id}).then(function(t){a.materials=t.data})},delete_booking:function(t){var a=this;this.$swal({title:this.$t("delete_booking_title"),text:this.$t("delete_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("cancel"),confirmButtonText:this.$t("confirm_delete"),showLoaderOnConfirm:!0,preConfirm:function(){return o["a"].postData("/delete_booking",{booking_id:t.booking_id}).then(function(t){return t})}}).then(function(t){t.value&&(t.value.code?a.$swal(a.$t("deleted_title"),"","success").then(function(t){a.getdata(),a.forceRerender(),a.initVal()}):a.$swal(t.value.message,"","error"))})},reject:function(t){var a=this;this.$swal({title:this.$t("reject_booking_title"),text:this.$t("reject_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("cancel"),confirmButtonText:this.$t("confirm_delete"),showLoaderOnConfirm:!0,preConfirm:function(){return o["a"].postData("/reject",{booking_id:t.booking_id}).then(function(t){return t})}}).then(function(t){t.value&&(t.value.code?a.$swal(a.$t("rejected_title"),"","success").then(function(t){a.getdata(),a.forceRerender(),a.initVal()}):a.$swal(t.value.message,"","error"))})},approve:function(t){var a=this;this.$swal({title:this.$t("approve_booking_title"),text:this.$t("approve_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("cancel"),confirmButtonText:this.$t("confirm_delete"),showLoaderOnConfirm:!0,preConfirm:function(){return o["a"].postData("/approve",{booking_id:t.booking_id}).then(function(t){return t})}}).then(function(t){t.value&&(t.value.code?a.$swal(a.$t("approved_title"),"","success").then(function(t){a.getdata(),a.forceRerender(),a.initVal()}):a.$swal(t.value.message,"","error"))})},getdata:function(){var t=this;o["a"].postData("/get_booked",{}).then(function(a){t.bookings=a.data})},search:function(){var t=this;this.$vs.loading({background:this.backgroundLoading,color:this.colorLoading,container:"#button-with-loading",scale:.45}),this.searched=!1;var a=this.editObj,e=a.start_date,s=a.end_date;e+=" 00:00:00",s+=" 23:59:59";var i=o["a"].getUser().user.username;o["a"].postData("get_user_booking_history",{start_date:e,end_date:s,username:i}).then(function(a){t.bookings=a.data,t.searched=!0,t.$vs.loading.close("#button-with-loading > .con-vs-loading")},function(a){t.$vs.loading.close("#button-with-loading > .con-vs-loading"),t.searched=!0})},forceRerender:function(){var t=this;this.renderComponent=!1,this.$nextTick(function(){t.renderComponent=!0})},save:function(){var t=this;this.submitted=!0,this.isInvald||(this.popupActive?this.$vs.loading({background:this.backgroundLoading,color:this.colorLoading,container:"#button-with-loading1",scale:.45}):this.$vs.loading({background:this.backgroundLoading,color:this.colorLoading,container:"#button-with-loading",scale:.45}),o["a"].postData("/upsert_room",this.editObj).then(function(a){t.popupActive?t.$vs.loading.close("#button-with-loading1 > .con-vs-loading"):t.$vs.loading.close("#button-with-loading > .con-vs-loading"),t.popupActive=!1,t.$swal(t.$t("success_title"),"","success").then(function(a){t.getdata(),t.forceRerender()})},function(a){t.popupActive=!1}))}},watch:{}}),u=_,m=(e("f32b"),e("2877")),h=Object(m["a"])(u,s,i,!1,null,"0710dc95",null);a["default"]=h.exports},"82a0":function(t,a,e){},f32b:function(t,a,e){"use strict";var s=e("82a0"),i=e.n(s);i.a}}]);
//# sourceMappingURL=chunk-81ef7b5c.da24f5a2.js.map