(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29dd7f9e"],{"0978":function(t,e,a){},"8e30":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.renderComponent?a("div",{staticClass:"vx-col w-full mb-base"},[a("vx-card",[a("vs-tabs",[a("vs-tab",{attrs:{label:t.$t("Department Data")}},[a("div",{staticClass:"mt-3"},[a("vs-table",{attrs:{stripe:"",pagination:"","max-items":"10",search:"",data:t.subDepartments},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return t._l(n,function(e,n){return a("vs-tr",{key:n,attrs:{data:e}},[a("vs-td",{attrs:{data:e.sub_department_id}},[a("div",{staticStyle:{width:"200px"}},[t._v(t._s(e.sub_department_id))])]),a("vs-td",{attrs:{data:e.sub_department_name_th}},[t._v(t._s(e.sub_department_name_th))]),a("vs-td",{attrs:{data:e.sub_department_name_en}},[t._v(t._s(e.sub_department_name_en))]),a("vs-td",{attrs:{data:e["department_name_"+t.$i18n.locale]}},[t._v(t._s(e["department_name_"+t.$i18n.locale]))]),a("vs-td",[a("feather-icon",{staticClass:"cursor-pointer w-6 h-6 text-warning",attrs:{icon:"EditIcon",size:"small"},on:{click:function(a){return t.edit(e)}}})],1),a("vs-td",[a("feather-icon",{staticClass:"cursor-pointer w-6 h-6 text-danger",attrs:{icon:"Trash2Icon",size:"small"},on:{click:function(a){return t.delete_building(e)}}})],1)],1)})}}],null,!1,544900551)},[a("template",{slot:"thead"},[a("vs-th",{staticClass:"text-center",attrs:{"sort-key":"sub_department_id"}},[t._v(t._s(t.$t("Department ID")))]),a("vs-th",{attrs:{"sort-key":"sub_department_name_th"}},[t._v(t._s(t.$t("Department's Thai Name")))]),a("vs-th",{attrs:{"sort-key":"sub_department_name_en"}},[t._v(t._s(t.$t("Department's English Name")))]),a("vs-th",[t._v(t._s(t.$t("Officer")))]),a("vs-th",[t._v(t._s(t.$t("edit")))]),a("vs-th",[t._v(t._s(t.$t("delete")))])],1)],2)],1)]),a("vs-tab",{attrs:{label:t.$t("Add Department")}},[a("div",{staticClass:"mt-3"},[a("div",{staticClass:"container"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full mt-5"},[a("label",{attrs:{for:""}},[t._v(t._s(t.$t("Department's Thai Name")))]),a("vs-input",{staticClass:"w-full",attrs:{danger:t.invalid.sub_department_name_th},model:{value:t.editObj.sub_department_name_th,callback:function(e){t.$set(t.editObj,"sub_department_name_th",e)},expression:"editObj.sub_department_name_th"}}),t.invalid.sub_department_name_th?a("div",{staticClass:"errors"},[t._v(t._s(t.$t("Please input Department's Thai Name")))]):t._e()],1),a("div",{staticClass:"vx-col md:w-1/2 w-full mt-5"},[a("label",{attrs:{for:""}},[t._v(t._s(t.$t("Department's English Name")))]),a("vs-input",{staticClass:"w-full",attrs:{danger:t.invalid.sub_department_name_en},model:{value:t.editObj.sub_department_name_en,callback:function(e){t.$set(t.editObj,"sub_department_name_en",e)},expression:"editObj.sub_department_name_en"}}),t.invalid.sub_department_name_en?a("div",{staticClass:"errors"},[t._v(t._s(t.$t("Please input Department's English Name")))]):t._e()],1),a("div",{staticClass:"vx-col md:w-1/2 w-full mt-5"},[a("label",{attrs:{for:""}},[t._v(t._s(t.$t("Officer")))]),a("vs-select",{staticClass:"w-full",attrs:{danger:t.invalid.department_id},model:{value:t.editObj.department_id,callback:function(e){t.$set(t.editObj,"department_id",e)},expression:"editObj.department_id"}},t._l(t.departments,function(e,n){return a("vs-select-item",{key:n,attrs:{value:e.department_id,text:e["department_name_"+t.$i18n.locale]}})}),1),t.invalid.department_id?a("div",{staticClass:"errors"},[t._v(t._s(t.$t("Please select officer")))]):t._e()],1)])])]),a("div",{staticClass:"container mt-5"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"w-full"},[a("vs-button",{ref:"loadableButton",staticClass:"vs-con-loading__container mr-5 ml-4",attrs:{id:"button-with-loading",vslor:"primary"},on:{click:t.save}},[t._v(t._s(t.$t("save")))]),a("vs-button",{attrs:{color:"danger",type:"border"},on:{click:function(e){return t.forceRerender()}}},[t._v(t._s(t.$t("cancel")))])],1)])])])],1),a("vs-popup",{staticClass:"holamundo",attrs:{title:t.$t("edit_title"),active:t.popupActive},on:{"update:active":function(e){t.popupActive=e}}},[a("div",{staticClass:"mt-3"},[a("div",{staticClass:"container"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-full mt-5"},[a("label",{attrs:{for:""}},[t._v(t._s(t.$t("Department ID")))]),a("vs-input",{staticClass:"w-full",attrs:{disabled:""},model:{value:t.editObj.sub_department_id,callback:function(e){t.$set(t.editObj,"sub_department_id",e)},expression:"editObj.sub_department_id"}})],1),a("div",{staticClass:"vx-col md:w-full mt-5"},[a("label",{attrs:{for:""}},[t._v(t._s(t.$t("Department's Thai Name")))]),a("vs-input",{staticClass:"w-full",attrs:{danger:t.invalid.sub_department_name_th},model:{value:t.editObj.sub_department_name_th,callback:function(e){t.$set(t.editObj,"sub_department_name_th",e)},expression:"editObj.sub_department_name_th"}}),t.invalid.sub_department_name_th?a("div",{staticClass:"errors"},[t._v(t._s(t.$t("Please input Department's Thai Name")))]):t._e()],1),a("div",{staticClass:"vx-col md:w-full mt-5"},[a("label",{attrs:{for:""}},[t._v(t._s(t.$t("Department's English Name")))]),a("vs-input",{staticClass:"w-full",attrs:{danger:t.invalid.sub_department_name_en},model:{value:t.editObj.sub_department_name_en,callback:function(e){t.$set(t.editObj,"sub_department_name_en",e)},expression:"editObj.sub_department_name_en"}}),t.invalid.sub_department_name_en?a("div",{staticClass:"errors"},[t._v(t._s(t.$t("Please input Department's English Name")))]):t._e()],1),a("div",{staticClass:"vx-col md:w-full mt-5"},[a("label",{attrs:{for:""}},[t._v(t._s(t.$t("Officer")))]),a("vs-select",{staticClass:"w-full",attrs:{danger:t.invalid.department_id},model:{value:t.editObj.department_id,callback:function(e){t.$set(t.editObj,"department_id",e)},expression:"editObj.department_id"}},t._l(t.departments,function(e,n){return a("vs-select-item",{key:n,attrs:{value:e.department_id,text:e["department_name_"+t.$i18n.locale]}})}),1),t.invalid.department_id?a("div",{staticClass:"errors"},[t._v(t._s(t.$t("Please select officer")))]):t._e()],1)])])]),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"w-full"},[a("vs-button",{ref:"loadableButton",staticClass:"vs-con-loading__container mr-4 ml-8",attrs:{id:"button-with-loading",vslor:"primary"},on:{click:t.save_edit}},[t._v(t._s(t.$t("save")))]),a("vs-button",{attrs:{color:"danger",type:"border"},on:{click:function(e){t.popupActive=!1}}},[t._v(t._s(t.$t("cancel")))])],1)])])])],1)],1):t._e()},s=[],r=a("c93e"),i=(a("96cf"),a("3040")),c=(a("ac6a"),a("fa33")),l=a("67cf"),d=a("fbea"),o=(a("c1df"),a("4be7"),{components:{EditUser:d["a"],Datepicker:c["a"]},data:function(){return{colorLoading:"#ff8000",renderComponent:!0,sideBarActive:!1,editing:!1,popupActive:!1,subDepartments:[],submitted:!1,departments:[],editObj:{}}},computed:{invalid:function(){var t=this,e=function(e){var a={};return e.forEach(function(e){""==t.editObj[e]&&t.submitted?a[e]=!0:a[e]=!1}),a};return e(["department_id","sub_department_name_en","sub_department_name_th"])},isInvald:function(){var t=!1;for(var e in this.invalid)this.invalid[e]&&(t=!0);return t}},created:function(){this.getdata(),this.initVal()},methods:{initVal:function(){this.submitted=!1,this.popupActive=!1,this.editObj={department_id:"",sub_department_name_en:"",sub_department_name_th:""}},getdata:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].postData("department/getDepartment",{});case 3:return e=t.sent,this.departments=e.data,t.next=7,l["a"].postData("subDepartment/getSubDepartment",{department_id:""});case 7:a=t.sent,this.subDepartments=a.data,t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}(),edit:function(t){this.editObj=Object(r["a"])({},t),this.popupActive=!0},save:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.submitted=!0,this.isInvald){t.next=14;break}return t.prev=2,t.next=5,l["a"].postData("subDepartment/createSubDepartment",this.editObj);case 5:return t.next=7,this.$swal(this.$t("success_title"),"","success");case 7:this.getdata(),this.forceRerender(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[2,11]])}));return function(){return t.apply(this,arguments)}}(),save_edit:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.submitted=!0,this.isInvald){t.next=23;break}return this.$vs.loading({color:this.colorLoading}),t.prev=3,t.next=6,l["a"].postData("subDepartment/updateSubDepartment",this.editObj);case 6:return this.popupActive=!1,this.$vs.loading.close(),t.next=10,this.$swal(this.$t("success_title"),"","success");case 10:this.getdata(),this.forceRerender(),t.next=23;break;case 14:return t.prev=14,t.t0=t["catch"](3),console.log("catching error"),this.popupActive=!1,this.$vs.loading.close(),t.next=21,this.$swal("error",t.t0.message,"error");case 21:this.popupActive=!0,console.log(t.t0);case 23:case"end":return t.stop()}},t,this,[[3,14]])}));return function(){return t.apply(this,arguments)}}(),forceRerender:function(){var t=this;this.renderComponent=!1,this.$nextTick(function(){t.initVal(),t.renderComponent=!0})},delete_building:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$swal({title:this.$t("Are your sure to delete this Department?"),text:this.$t("delete_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("cancel"),confirmButtonText:this.$t("confirm_delete"),showLoaderOnConfirm:!0,preConfirm:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].postData("subDepartment/deleteSubDepartment",e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(){return t.apply(this,arguments)}}()});case 2:if(a=t.sent,!a.value){t.next=14;break}if(1!=a.value.code){t.next=12;break}return t.next=7,this.$swal(this.$t("deleted_title"),"","success");case 7:this.getdata(),this.forceRerender(),this.initVal(),t.next=14;break;case 12:return t.next=14,this.$swal(this.$t("error"),a.value.message,"error");case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},watch:{popupActive:function(t){t||this.initVal()}}}),u=o,m=(a("d10c"),a("2877")),p=Object(m["a"])(u,n,s,!1,null,"094b4e65",null);e["default"]=p.exports},c93e:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var n=a("a322");function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),s.forEach(function(e){Object(n["a"])(t,e,a[e])})}return t}},d10c:function(t,e,a){"use strict";var n=a("0978"),s=a.n(n);s.a}}]);
//# sourceMappingURL=chunk-29dd7f9e.a2013756.js.map