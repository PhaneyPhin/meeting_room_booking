{"remainingRequest":"D:\\DTC PROJECT\\booking\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DTC PROJECT\\booking\\web\\src\\views\\Cost.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DTC PROJECT\\booking\\web\\src\\views\\Cost.vue","mtime":1577333332696},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport VueApexCharts from \"vue-apexcharts\";\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\nimport service from \"@/service/service\";\r\nimport flatPickr from \"vue-flatpickr-component\";\r\nimport \"flatpickr/dist/flatpickr.css\";\r\nimport { async } from \"q\";\r\nimport { departmentColors } from \"./Colors\";\r\nconst colors = [\r\n  \"#242145\",\r\n  \"#03a9f4\",\r\n  \"#b2b63d\",\r\n  \"#ffeb3b\",\r\n  \"#795548\",\r\n  \"#46c93a\",\r\n  \"#1f74ff\",\r\n  \"#ff4757\",\r\n  \"#ffba00\",\r\n  \"#1e1e1e\",\r\n  \"#5b3dc3\",\r\n  \"#17c964\",\r\n  \"#f2135d\",\r\n  \"#ff8200\"\r\n];\r\n\r\nexport default {\r\n  components: {\r\n    VueApexCharts,\r\n    VuePerfectScrollbar,\r\n    flatPickr\r\n  },\r\n  data() {\r\n    return {\r\n      departmentColors: departmentColors,\r\n      colors: colors,\r\n      renderDepartment_chart: false,\r\n      settings: {\r\n        // perfectscrollbar settings\r\n        maxScrollbarLength: 60,\r\n        wheelSpeed: 0.6\r\n      },\r\n      configdateTimePicker: {\r\n        enableTime: false,\r\n        enableSeconds: false,\r\n        noCalendar: false\r\n      },\r\n      editObj: {\r\n        start_date: \"\",\r\n        end_date: \"\"\r\n      },\r\n      DepartmentPie: {\r\n        analyticsData: [],\r\n        series: [],\r\n        chartOptions: {\r\n          labels: [],\r\n          dataLabels: {\r\n            enabled: false\r\n          },\r\n          legend: { show: false },\r\n          chart: {\r\n            type: \"pie\",\r\n            offsetY: 30,\r\n            dropShadow: {\r\n              enabled: false,\r\n              blur: 5,\r\n              left: 1,\r\n              top: 1,\r\n              opacity: 0.2\r\n            },\r\n            toolbar: {\r\n              show: false\r\n            }\r\n          },\r\n          stroke: {\r\n            width: 5\r\n          },\r\n          colors: colors\r\n        }\r\n      },\r\n      listDepartments: []\r\n    };\r\n  },\r\n  computed: {\r\n    invalid() {\r\n      var require = type => this.submitted && this.editObj[type] == \"\";\r\n      return {\r\n        start_date: require(\"start_date\"),\r\n        end_date: require(\"end_date\")\r\n      };\r\n    },\r\n    isInvald() {\r\n      return this.invalid.start_date || this.invalid.end_date;\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.$refs.chatLogPS.$el.scrollTop = 0;\r\n    this.search();\r\n  },\r\n  methods: {\r\n    async search() {\r\n      this.renderDepartment_chart = false;\r\n\r\n      var response = await service.postData(\"getSummaryDepartmentCost\", {\r\n        ...this.editObj\r\n      });\r\n      this.DepartmentPie.chartOptions.labels = response.data.map(item => {\r\n        return item[\"department_name_\" + this.$i18n.locale];\r\n      });\r\n      this.DepartmentPie.series = response.data.map(item => {\r\n        return parseFloat(item.total_price);\r\n      });\r\n      this.DepartmentPie.analyticsData = [...response.data];\r\n      this.listDepartments = [];\r\n      this.DepartmentPie.analyticsData.forEach(async (item, index) => {\r\n        var test = {\r\n          SubDepartmentPIE: {\r\n            analyticsData: [],\r\n            series: [],\r\n            chartOptions: {\r\n              labels: [],\r\n              dataLabels: {\r\n                enabled: false\r\n              },\r\n              legend: { show: false },\r\n              chart: {\r\n                type: \"pie\",\r\n                offsetY: 30,\r\n                dropShadow: {\r\n                  enabled: false,\r\n                  blur: 5,\r\n                  left: 1,\r\n                  top: 1,\r\n                  opacity: 0.2\r\n                },\r\n                toolbar: {\r\n                  show: false\r\n                }\r\n              },\r\n              stroke: {\r\n                width: 5\r\n              },\r\n              colors: departmentColors[index]\r\n            }\r\n          }\r\n        };\r\n\r\n        var response1 = await service.postData(\"getSummarySubDepartmentCost\", {\r\n          department_id: item.department_id,\r\n          ...this.editObj\r\n        });\r\n        console.log(response1);\r\n        test.SubDepartmentPIE.chartOptions.labels = response1.data.map(\r\n          item1 => {\r\n            return item1[\"sub_department_name_\" + this.$i18n.locale];\r\n          }\r\n        );\r\n        test.SubDepartmentPIE.series = response1.data.map(item1 => {\r\n          return parseFloat(item1.total_price);\r\n        });\r\n        test.SubDepartmentPIE.analyticsData = response1.data;\r\n        // console.log();\r\n        this.listDepartments.push({ ...item, ...test });\r\n      });\r\n      this.renderDepartment_chart = true;\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["Cost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cost.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"mb-base w-full\">\r\n    <vx-card>\r\n      <h6>{{$t(\"Search the code\")}}</h6>\r\n\r\n      <div class=\"mt-6 vx-row mb-6\">\r\n        <div class=\"vx-col lg:w-5/12 md:w-1/2 w-full\">\r\n          <div class=\"vx-row\">\r\n            <div class=\"vx-col lg:w-1/3 w-full mt-5\" style=\"padding-top:3px\">\r\n              <label>{{$t(\"start_datetime\")}}</label>\r\n            </div>\r\n            <div class=\"vx-col lg:w-2/3 w-full lg:mt-5 mt-0 sm:pr-10 lg:pr-0 md:pr-20\">\r\n              <flat-pickr\r\n                :config=\"configdateTimePicker\"\r\n                class=\"w-full flatpickr-input\"\r\n                v-model=\"editObj.start_date\"\r\n                :class=\"{' danger':invalid.start_date}\"\r\n                placeholder\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"vx-col lg:w-5/12 md:w-1/2 w-full\">\r\n          <div class=\"vx-row\">\r\n            <div class=\"vx-col lg:w-1/3 w-full mt-5\" style=\"padding-top:3px\">\r\n              <label>{{$t(\"end_datetime\")}}</label>\r\n            </div>\r\n            <div class=\"vx-col lg:w-2/3 w-full lg:mt-5 mt-0 sm:pr-10 lg:pr-0 md:pr-20\">\r\n              <flat-pickr\r\n                :config=\"configdateTimePicker\"\r\n                class=\"w-full flatpickr-input\"\r\n                v-model=\"editObj.end_date\"\r\n                :class=\"{'w-full flatpickr-input danger':invalid.end_date}\"\r\n                placeholder\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"vx-col sm:pr-10 md:pr-20 lg:w-1/6 md:w-1/2 w-full mt-5\">\r\n          <div class=\"vx-row pr-4 pl-4\">\r\n            <vs-button\r\n              ref=\"loadableButton\"\r\n              id=\"button-with-loading\"\r\n              class=\"vs-con-loading__container vx-col w-full\"\r\n              vslor=\"primary\"\r\n              @click=\"search()\"\r\n            >{{$t('search')}}</vs-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </vx-card>\r\n    <div class=\"vx-row\">\r\n      <div class=\"vx-col w-full lg:w-1/2 lg:mt-5 mt-base mt-5 overflow-hidden\">\r\n        <vx-card>\r\n          <div slot=\"no-body\">\r\n            <div class=\"vx-card__header\">\r\n              <div class=\"vx-card__title\">\r\n                <h4 class>{{$t('Officer')}}</h4>\r\n              </div>\r\n            </div>\r\n            <!-- CHART -->\r\n            <vue-apex-charts\r\n              type=\"pie\"\r\n              height=\"345\"\r\n              class=\"mt-2\"\r\n              :options=\"DepartmentPie.chartOptions\"\r\n              :series=\"DepartmentPie.series\"\r\n              v-if=\"renderDepartment_chart\"\r\n            />\r\n\r\n            <!-- CHART DATA -->\r\n            <div style=\"height:200px;\">\r\n              <VuePerfectScrollbar\r\n                ref=\"chatLogPS\"\r\n                class=\"scroll-area pt-6 px-6\"\r\n                :settings=\"settings\"\r\n              >\r\n                <ul class=\"mb-1\" ref=\"chatLog\">\r\n                  <li\r\n                    v-for=\"(department,index) in DepartmentPie.analyticsData\"\r\n                    :key=\"index\"\r\n                    class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\"\r\n                  >\r\n                    <span class=\"flex items-center\">\r\n                      <span\r\n                        class=\"inline-block h-3 w-3 rounded-full mr-2\"\r\n                        :style=\"{'background':colors[index]}\"\r\n                      ></span>\r\n                      <span\r\n                        class=\"font-semibold\"\r\n                      >{{$t('Officer of') +' '+department['department_name_'+$i18n.locale] }}</span>\r\n                    </span>\r\n                    <span>{{ department.total_price }}</span>\r\n                  </li>\r\n                </ul>\r\n              </VuePerfectScrollbar>\r\n            </div>\r\n          </div>\r\n        </vx-card>\r\n      </div>\r\n\r\n      <div\r\n        class=\"vx-col w-full lg:w-1/2 lg:mt-5 mt-base overflow-hidden\"\r\n        v-for=\"(department,index) in listDepartments\"\r\n        :key=\"index\"\r\n      >\r\n        <vx-card>\r\n          <div slot=\"no-body\">\r\n            <div class=\"vx-card__header\">\r\n              <div class=\"vx-card__title\">\r\n                <h4 class>{{$t('Officer of') + \" \"+department['department_name_'+$i18n.locale]}}</h4>\r\n              </div>\r\n            </div>\r\n            <!-- CHART -->\r\n            <vue-apex-charts\r\n              type=\"pie\"\r\n              height=\"345\"\r\n              class=\"mt-2\"\r\n              :options=\"department.SubDepartmentPIE.chartOptions\"\r\n              :series=\"department.SubDepartmentPIE.series\"\r\n              v-if=\"renderDepartment_chart\"\r\n            />\r\n            <!-- <pre>{{department | json}}</pre> -->\r\n            <div style=\"height:200px;\">\r\n              <VuePerfectScrollbar\r\n                ref=\"chatLogPS\"\r\n                class=\"scroll-area pt-6 px-6\"\r\n                :settings=\"settings\"\r\n              >\r\n                <ul class=\"mb-1\" ref=\"chatLog\">\r\n                  <li\r\n                    v-for=\"(sub_department,index1) in department.SubDepartmentPIE.analyticsData\"\r\n                    :key=\"index1\"\r\n                    class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\"\r\n                  >\r\n                    <span class=\"flex items-center\">\r\n                      <span\r\n                        class=\"inline-block h-3 w-3 rounded-full mr-2\"\r\n                        :style=\"{'background':departmentColors[index%departmentColors.length][index1]}\"\r\n                      ></span>\r\n                      <span\r\n                        class=\"font-semibold\"\r\n                      >{{ $t('Department of')+' '+sub_department['sub_department_name_'+$i18n.locale]}}</span>\r\n                    </span>\r\n                    <span>{{ sub_department.total_price }}</span>\r\n                  </li>\r\n                </ul>\r\n              </VuePerfectScrollbar>\r\n            </div>\r\n          </div>\r\n        </vx-card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VueApexCharts from \"vue-apexcharts\";\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\nimport service from \"@/service/service\";\r\nimport flatPickr from \"vue-flatpickr-component\";\r\nimport \"flatpickr/dist/flatpickr.css\";\r\nimport { async } from \"q\";\r\nimport { departmentColors } from \"./Colors\";\r\nconst colors = [\r\n  \"#242145\",\r\n  \"#03a9f4\",\r\n  \"#b2b63d\",\r\n  \"#ffeb3b\",\r\n  \"#795548\",\r\n  \"#46c93a\",\r\n  \"#1f74ff\",\r\n  \"#ff4757\",\r\n  \"#ffba00\",\r\n  \"#1e1e1e\",\r\n  \"#5b3dc3\",\r\n  \"#17c964\",\r\n  \"#f2135d\",\r\n  \"#ff8200\"\r\n];\r\n\r\nexport default {\r\n  components: {\r\n    VueApexCharts,\r\n    VuePerfectScrollbar,\r\n    flatPickr\r\n  },\r\n  data() {\r\n    return {\r\n      departmentColors: departmentColors,\r\n      colors: colors,\r\n      renderDepartment_chart: false,\r\n      settings: {\r\n        // perfectscrollbar settings\r\n        maxScrollbarLength: 60,\r\n        wheelSpeed: 0.6\r\n      },\r\n      configdateTimePicker: {\r\n        enableTime: false,\r\n        enableSeconds: false,\r\n        noCalendar: false\r\n      },\r\n      editObj: {\r\n        start_date: \"\",\r\n        end_date: \"\"\r\n      },\r\n      DepartmentPie: {\r\n        analyticsData: [],\r\n        series: [],\r\n        chartOptions: {\r\n          labels: [],\r\n          dataLabels: {\r\n            enabled: false\r\n          },\r\n          legend: { show: false },\r\n          chart: {\r\n            type: \"pie\",\r\n            offsetY: 30,\r\n            dropShadow: {\r\n              enabled: false,\r\n              blur: 5,\r\n              left: 1,\r\n              top: 1,\r\n              opacity: 0.2\r\n            },\r\n            toolbar: {\r\n              show: false\r\n            }\r\n          },\r\n          stroke: {\r\n            width: 5\r\n          },\r\n          colors: colors\r\n        }\r\n      },\r\n      listDepartments: []\r\n    };\r\n  },\r\n  computed: {\r\n    invalid() {\r\n      var require = type => this.submitted && this.editObj[type] == \"\";\r\n      return {\r\n        start_date: require(\"start_date\"),\r\n        end_date: require(\"end_date\")\r\n      };\r\n    },\r\n    isInvald() {\r\n      return this.invalid.start_date || this.invalid.end_date;\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.$refs.chatLogPS.$el.scrollTop = 0;\r\n    this.search();\r\n  },\r\n  methods: {\r\n    async search() {\r\n      this.renderDepartment_chart = false;\r\n\r\n      var response = await service.postData(\"getSummaryDepartmentCost\", {\r\n        ...this.editObj\r\n      });\r\n      this.DepartmentPie.chartOptions.labels = response.data.map(item => {\r\n        return item[\"department_name_\" + this.$i18n.locale];\r\n      });\r\n      this.DepartmentPie.series = response.data.map(item => {\r\n        return parseFloat(item.total_price);\r\n      });\r\n      this.DepartmentPie.analyticsData = [...response.data];\r\n      this.listDepartments = [];\r\n      this.DepartmentPie.analyticsData.forEach(async (item, index) => {\r\n        var test = {\r\n          SubDepartmentPIE: {\r\n            analyticsData: [],\r\n            series: [],\r\n            chartOptions: {\r\n              labels: [],\r\n              dataLabels: {\r\n                enabled: false\r\n              },\r\n              legend: { show: false },\r\n              chart: {\r\n                type: \"pie\",\r\n                offsetY: 30,\r\n                dropShadow: {\r\n                  enabled: false,\r\n                  blur: 5,\r\n                  left: 1,\r\n                  top: 1,\r\n                  opacity: 0.2\r\n                },\r\n                toolbar: {\r\n                  show: false\r\n                }\r\n              },\r\n              stroke: {\r\n                width: 5\r\n              },\r\n              colors: departmentColors[index]\r\n            }\r\n          }\r\n        };\r\n\r\n        var response1 = await service.postData(\"getSummarySubDepartmentCost\", {\r\n          department_id: item.department_id,\r\n          ...this.editObj\r\n        });\r\n        console.log(response1);\r\n        test.SubDepartmentPIE.chartOptions.labels = response1.data.map(\r\n          item1 => {\r\n            return item1[\"sub_department_name_\" + this.$i18n.locale];\r\n          }\r\n        );\r\n        test.SubDepartmentPIE.series = response1.data.map(item1 => {\r\n          return parseFloat(item1.total_price);\r\n        });\r\n        test.SubDepartmentPIE.analyticsData = response1.data;\r\n        // console.log();\r\n        this.listDepartments.push({ ...item, ...test });\r\n      });\r\n      this.renderDepartment_chart = true;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"]}]}