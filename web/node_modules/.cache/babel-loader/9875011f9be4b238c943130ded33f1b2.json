{"remainingRequest":"D:\\DTC PROJECT\\booking\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\DTC PROJECT\\booking\\web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DTC PROJECT\\booking\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DTC PROJECT\\booking\\web\\src\\views\\Cost.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DTC PROJECT\\booking\\web\\src\\views\\Cost.vue","mtime":1577284632372},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _toConsumableArray from \"D:\\\\DTC PROJECT\\\\booking\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/toConsumableArray\";\nimport _objectSpread from \"D:\\\\DTC PROJECT\\\\booking\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\DTC PROJECT\\\\booking\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport VueApexCharts from \"vue-apexcharts\";\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\nimport service from \"@/service/service\";\nimport flatPickr from \"vue-flatpickr-component\";\nimport \"flatpickr/dist/flatpickr.css\";\nimport { async } from \"q\";\nimport { departmentColors } from \"./Colors\";\nvar colors = [\"#242145\", \"#03a9f4\", \"#b2b63d\", \"#ffeb3b\", \"#795548\", \"#46c93a\", \"#1f74ff\", \"#ff4757\", \"#ffba00\", \"#1e1e1e\", \"#5b3dc3\", \"#17c964\", \"#f2135d\", \"#ff8200\"];\nexport default {\n  components: {\n    VueApexCharts: VueApexCharts,\n    VuePerfectScrollbar: VuePerfectScrollbar,\n    flatPickr: flatPickr\n  },\n  data: function data() {\n    return {\n      departmentColors: departmentColors,\n      colors: colors,\n      renderDepartment_chart: false,\n      settings: {\n        // perfectscrollbar settings\n        maxScrollbarLength: 60,\n        wheelSpeed: 0.6\n      },\n      configdateTimePicker: {\n        enableTime: false,\n        enableSeconds: false,\n        noCalendar: false\n      },\n      editObj: {\n        start_date: \"\",\n        end_date: \"\"\n      },\n      DepartmentPie: {\n        analyticsData: [],\n        series: [],\n        chartOptions: {\n          labels: [],\n          dataLabels: {\n            enabled: false\n          },\n          legend: {\n            show: false\n          },\n          chart: {\n            type: \"pie\",\n            offsetY: 30,\n            dropShadow: {\n              enabled: false,\n              blur: 5,\n              left: 1,\n              top: 1,\n              opacity: 0.2\n            },\n            toolbar: {\n              show: false\n            }\n          },\n          stroke: {\n            width: 5\n          },\n          colors: colors\n        }\n      },\n      listDepartments: []\n    };\n  },\n  computed: {\n    invalid: function invalid() {\n      var _this = this;\n\n      var require = function require(type) {\n        return _this.submitted && _this.editObj[type] == \"\";\n      };\n\n      return {\n        start_date: require(\"start_date\"),\n        end_date: require(\"end_date\")\n      };\n    },\n    isInvald: function isInvald() {\n      return this.invalid.start_date || this.invalid.end_date;\n    }\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.$refs.chatLogPS.$el.scrollTop = 0;\n              this.search();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function mounted() {\n      return _mounted.apply(this, arguments);\n    };\n  }(),\n  methods: {\n    search: function () {\n      var _search = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var _this2 = this;\n\n        var response;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.renderDepartment_chart = false;\n                _context3.next = 3;\n                return service.postData(\"getSummaryDepartmentCost\", _objectSpread({}, this.editObj));\n\n              case 3:\n                response = _context3.sent;\n                this.DepartmentPie.chartOptions.labels = response.data.map(function (item) {\n                  return item[\"department_name_\" + _this2.$i18n.locale];\n                });\n                this.DepartmentPie.series = response.data.map(function (item) {\n                  return parseFloat(item.total_price);\n                });\n                this.DepartmentPie.analyticsData = _toConsumableArray(response.data);\n                this.listDepartments = [];\n                this.DepartmentPie.analyticsData.forEach(\n                /*#__PURE__*/\n                function () {\n                  var _ref = _asyncToGenerator(\n                  /*#__PURE__*/\n                  regeneratorRuntime.mark(function _callee2(item, index) {\n                    var test, response1;\n                    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            test = {\n                              SubDepartmentPIE: {\n                                analyticsData: [],\n                                series: [],\n                                chartOptions: {\n                                  labels: [],\n                                  dataLabels: {\n                                    enabled: false\n                                  },\n                                  legend: {\n                                    show: false\n                                  },\n                                  chart: {\n                                    type: \"pie\",\n                                    offsetY: 30,\n                                    dropShadow: {\n                                      enabled: false,\n                                      blur: 5,\n                                      left: 1,\n                                      top: 1,\n                                      opacity: 0.2\n                                    },\n                                    toolbar: {\n                                      show: false\n                                    }\n                                  },\n                                  stroke: {\n                                    width: 5\n                                  },\n                                  colors: departmentColors[index]\n                                }\n                              }\n                            };\n                            _context2.next = 3;\n                            return service.postData(\"getSummarySubDepartmentCost\", _objectSpread({\n                              department_id: item.department_id\n                            }, _this2.editObj));\n\n                          case 3:\n                            response1 = _context2.sent;\n                            console.log(response1);\n                            test.SubDepartmentPIE.chartOptions.labels = response1.data.map(function (item1) {\n                              return item1[\"sub_department_name_\" + _this2.$i18n.locale];\n                            });\n                            test.SubDepartmentPIE.series = response1.data.map(function (item1) {\n                              return parseFloat(item1.total_price);\n                            });\n                            test.SubDepartmentPIE.analyticsData = response1.data; // console.log();\n\n                            _this2.listDepartments.push(_objectSpread({}, item, test));\n\n                          case 9:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, this);\n                  }));\n\n                  return function (_x, _x2) {\n                    return _ref.apply(this, arguments);\n                  };\n                }());\n                this.renderDepartment_chart = true;\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function search() {\n        return _search.apply(this, arguments);\n      };\n    }()\n  }\n};",{"version":3,"sources":["Cost.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"mb-base w-full\">\r\n    <vx-card>\r\n      <h6>{{$t(\"Search the code\")}}</h6>\r\n\r\n      <div class=\"mt-6 vx-row mb-6\">\r\n        <div\r\n          class=\"vx-col lg:w-1/6 md:w-1/3 sm:w-1/3 w-1/3 mt-5\"\r\n          style=\"text-align:right;padding-top:3px\"\r\n        >\r\n          <label>{{$t(\"start_datetime\")}}</label>\r\n        </div>\r\n        <div class=\"vx-col lg:w-1/5 md:w-2/3 mt-5 sm:w-2/3 w-2/3 sm:pr-10 lg:pr-0 md:pr-20\">\r\n          <flat-pickr\r\n            :config=\"configdateTimePicker\"\r\n            class=\"w-full flatpickr-input\"\r\n            v-model=\"editObj.start_date\"\r\n            :class=\"{' danger':invalid.start_date}\"\r\n            placeholder\r\n          />\r\n        </div>\r\n        <div\r\n          class=\"vx-col lg:w-1/6 md:w-1/3 sm:w-1/3 w-1/3 mt-5\"\r\n          style=\"text-align:right;padding-top:3px\"\r\n        >\r\n          <label>{{$t(\"end_datetime\")}}</label>\r\n        </div>\r\n        <div class=\"vx-col lg:w-1/5 md:w-2/3 sm:w-2/3 w-2/3 mt-5 sm:pr-10 lg:pr-0 md:pr-20\">\r\n          <flat-pickr\r\n            :config=\"configdateTimePicker\"\r\n            class=\"w-full flatpickr-input\"\r\n            v-model=\"editObj.end_date\"\r\n            :class=\"{'w-full flatpickr-input danger':invalid.end_date}\"\r\n            placeholder\r\n          />\r\n        </div>\r\n\r\n        <div class=\"vx-col lg:w-1/6 md:w-1/3 sm:w-1/3 w-full mt-5 lg:pr-10 lg:pl-5\">\r\n          <vs-button\r\n            ref=\"loadableButton\"\r\n            id=\"button-with-loading\"\r\n            class=\"vs-con-loading__container md:mr-0 sm:mr-0 mr-0 lg:float-right md:float-right sm:float-right float-left\"\r\n            vslor=\"primary\"\r\n            @click=\"search()\"\r\n          >{{$t('search')}}</vs-button>\r\n        </div>\r\n      </div>\r\n    </vx-card>\r\n    <div class=\"vx-row\">\r\n      <div class=\"vx-col w-full lg:w-1/2 lg:mt-5 mt-base mt-5 overflow-hidden\">\r\n        <vx-card>\r\n          <div slot=\"no-body\">\r\n            <div class=\"vx-card__header\">\r\n              <div class=\"vx-card__title\">\r\n                <h4 class>{{$t('Officer')}}</h4>\r\n              </div>\r\n            </div>\r\n            <!-- CHART -->\r\n            <vue-apex-charts\r\n              type=\"pie\"\r\n              height=\"345\"\r\n              class=\"mt-2\"\r\n              :options=\"DepartmentPie.chartOptions\"\r\n              :series=\"DepartmentPie.series\"\r\n              v-if=\"renderDepartment_chart\"\r\n            />\r\n\r\n            <!-- CHART DATA -->\r\n            <div style=\"height:200px;\">\r\n              <VuePerfectScrollbar\r\n                ref=\"chatLogPS\"\r\n                class=\"scroll-area pt-6 px-6\"\r\n                :settings=\"settings\"\r\n              >\r\n                <ul class=\"mb-1\" ref=\"chatLog\">\r\n                  <li\r\n                    v-for=\"(department,index) in DepartmentPie.analyticsData\"\r\n                    :key=\"index\"\r\n                    class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\"\r\n                  >\r\n                    <span class=\"flex items-center\">\r\n                      <span\r\n                        class=\"inline-block h-3 w-3 rounded-full mr-2\"\r\n                        :style=\"{'background':colors[index]}\"\r\n                      ></span>\r\n                      <span\r\n                        class=\"font-semibold\"\r\n                      >{{$t('Officer of') +' '+department['department_name_'+$i18n.locale] }}</span>\r\n                    </span>\r\n                    <span>{{ department.total_price }}</span>\r\n                  </li>\r\n                </ul>\r\n              </VuePerfectScrollbar>\r\n            </div>\r\n          </div>\r\n        </vx-card>\r\n      </div>\r\n\r\n      <div\r\n        class=\"vx-col w-full lg:w-1/2 lg:mt-5 mt-base overflow-hidden\"\r\n        v-for=\"(department,index) in listDepartments\"\r\n        :key=\"index\"\r\n      >\r\n        <vx-card>\r\n          <div slot=\"no-body\">\r\n            <div class=\"vx-card__header\">\r\n              <div class=\"vx-card__title\">\r\n                <h4 class>{{$t('Officer of') + \" \"+department['department_name_'+$i18n.locale]}}</h4>\r\n              </div>\r\n            </div>\r\n            <!-- CHART -->\r\n            <vue-apex-charts\r\n              type=\"pie\"\r\n              height=\"345\"\r\n              class=\"mt-2\"\r\n              :options=\"department.SubDepartmentPIE.chartOptions\"\r\n              :series=\"department.SubDepartmentPIE.series\"\r\n              v-if=\"renderDepartment_chart\"\r\n            />\r\n            <!-- <pre>{{department | json}}</pre> -->\r\n            <div style=\"height:200px;\">\r\n              <VuePerfectScrollbar\r\n                ref=\"chatLogPS\"\r\n                class=\"scroll-area pt-6 px-6\"\r\n                :settings=\"settings\"\r\n              >\r\n                <ul class=\"mb-1\" ref=\"chatLog\">\r\n                  <li\r\n                    v-for=\"(sub_department,index1) in department.SubDepartmentPIE.analyticsData\"\r\n                    :key=\"index1\"\r\n                    class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\"\r\n                  >\r\n                    <span class=\"flex items-center\">\r\n                      <span\r\n                        class=\"inline-block h-3 w-3 rounded-full mr-2\"\r\n                        :style=\"{'background':departmentColors[index%departmentColors.length][index1]}\"\r\n                      ></span>\r\n                      <span\r\n                        class=\"font-semibold\"\r\n                      >{{ $t('Department of')+' '+sub_department['sub_department_name_'+$i18n.locale]}}</span>\r\n                    </span>\r\n                    <span>{{ sub_department.total_price }}</span>\r\n                  </li>\r\n                </ul>\r\n              </VuePerfectScrollbar>\r\n            </div>\r\n          </div>\r\n        </vx-card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VueApexCharts from \"vue-apexcharts\";\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\nimport service from \"@/service/service\";\r\nimport flatPickr from \"vue-flatpickr-component\";\r\nimport \"flatpickr/dist/flatpickr.css\";\r\nimport { async } from \"q\";\r\nimport { departmentColors } from \"./Colors\";\r\nconst colors = [\r\n  \"#242145\",\r\n  \"#03a9f4\",\r\n  \"#b2b63d\",\r\n  \"#ffeb3b\",\r\n  \"#795548\",\r\n  \"#46c93a\",\r\n  \"#1f74ff\",\r\n  \"#ff4757\",\r\n  \"#ffba00\",\r\n  \"#1e1e1e\",\r\n  \"#5b3dc3\",\r\n  \"#17c964\",\r\n  \"#f2135d\",\r\n  \"#ff8200\"\r\n];\r\n\r\nexport default {\r\n  components: {\r\n    VueApexCharts,\r\n    VuePerfectScrollbar,\r\n    flatPickr\r\n  },\r\n  data() {\r\n    return {\r\n      departmentColors: departmentColors,\r\n      colors: colors,\r\n      renderDepartment_chart: false,\r\n      settings: {\r\n        // perfectscrollbar settings\r\n        maxScrollbarLength: 60,\r\n        wheelSpeed: 0.6\r\n      },\r\n      configdateTimePicker: {\r\n        enableTime: false,\r\n        enableSeconds: false,\r\n        noCalendar: false\r\n      },\r\n      editObj: {\r\n        start_date: \"\",\r\n        end_date: \"\"\r\n      },\r\n      DepartmentPie: {\r\n        analyticsData: [],\r\n        series: [],\r\n        chartOptions: {\r\n          labels: [],\r\n          dataLabels: {\r\n            enabled: false\r\n          },\r\n          legend: { show: false },\r\n          chart: {\r\n            type: \"pie\",\r\n            offsetY: 30,\r\n            dropShadow: {\r\n              enabled: false,\r\n              blur: 5,\r\n              left: 1,\r\n              top: 1,\r\n              opacity: 0.2\r\n            },\r\n            toolbar: {\r\n              show: false\r\n            }\r\n          },\r\n          stroke: {\r\n            width: 5\r\n          },\r\n          colors: colors\r\n        }\r\n      },\r\n      listDepartments: []\r\n    };\r\n  },\r\n  computed: {\r\n    invalid() {\r\n      var require = type => this.submitted && this.editObj[type] == \"\";\r\n      return {\r\n        start_date: require(\"start_date\"),\r\n        end_date: require(\"end_date\")\r\n      };\r\n    },\r\n    isInvald() {\r\n      return this.invalid.start_date || this.invalid.end_date;\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.$refs.chatLogPS.$el.scrollTop = 0;\r\n    this.search();\r\n  },\r\n  methods: {\r\n    async search() {\r\n      this.renderDepartment_chart = false;\r\n\r\n      var response = await service.postData(\"getSummaryDepartmentCost\", {\r\n        ...this.editObj\r\n      });\r\n      this.DepartmentPie.chartOptions.labels = response.data.map(item => {\r\n        return item[\"department_name_\" + this.$i18n.locale];\r\n      });\r\n      this.DepartmentPie.series = response.data.map(item => {\r\n        return parseFloat(item.total_price);\r\n      });\r\n      this.DepartmentPie.analyticsData = [...response.data];\r\n      this.listDepartments = [];\r\n      this.DepartmentPie.analyticsData.forEach(async (item, index) => {\r\n        var test = {\r\n          SubDepartmentPIE: {\r\n            analyticsData: [],\r\n            series: [],\r\n            chartOptions: {\r\n              labels: [],\r\n              dataLabels: {\r\n                enabled: false\r\n              },\r\n              legend: { show: false },\r\n              chart: {\r\n                type: \"pie\",\r\n                offsetY: 30,\r\n                dropShadow: {\r\n                  enabled: false,\r\n                  blur: 5,\r\n                  left: 1,\r\n                  top: 1,\r\n                  opacity: 0.2\r\n                },\r\n                toolbar: {\r\n                  show: false\r\n                }\r\n              },\r\n              stroke: {\r\n                width: 5\r\n              },\r\n              colors: departmentColors[index]\r\n            }\r\n          }\r\n        };\r\n\r\n        var response1 = await service.postData(\"getSummarySubDepartmentCost\", {\r\n          department_id: item.department_id,\r\n          ...this.editObj\r\n        });\r\n        console.log(response1);\r\n        test.SubDepartmentPIE.chartOptions.labels = response1.data.map(\r\n          item1 => {\r\n            return item1[\"sub_department_name_\" + this.$i18n.locale];\r\n          }\r\n        );\r\n        test.SubDepartmentPIE.series = response1.data.map(item1 => {\r\n          return parseFloat(item1.total_price);\r\n        });\r\n        test.SubDepartmentPIE.analyticsData = response1.data;\r\n        // console.log();\r\n        this.listDepartments.push({ ...item, ...test });\r\n      });\r\n      this.renderDepartment_chart = true;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"],"sourceRoot":"src/views"}]}