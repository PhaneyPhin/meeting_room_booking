{"remainingRequest":"D:\\DTC PROJECT\\booking\\web\\node_modules\\thread-loader\\dist\\cjs.js!D:\\DTC PROJECT\\booking\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\DTC PROJECT\\booking\\web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DTC PROJECT\\booking\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DTC PROJECT\\booking\\web\\src\\views\\my_booking_history.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DTC PROJECT\\booking\\web\\src\\views\\my_booking_history.vue","mtime":1570009978819},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Datepicker from 'vuejs-datepicker';\nimport service from '@/service/service';\nimport EditUser from './extra-components/edit-user.vue'; // import ViewData from './view/ViewData.vue';\n\nimport moment from 'moment'; // import firebase from 'firebase/app'ว\n// import * as firebase from 'firebase/app';\n// import '@firebase/messaging';\n\nimport flatPickr from 'vue-flatpickr-component';\nimport 'flatpickr/dist/flatpickr.css';\nexport default {\n  components: {\n    EditUser: EditUser,\n    Datepicker: Datepicker,\n    flatPickr: flatPickr\n  },\n  data: function data() {\n    return {\n      change_password: false,\n      renderComponent: true,\n      popupActive: false,\n      bookings: [],\n      roles: [],\n      searched: false,\n      submitted: false,\n      configdateTimePicker: {\n        enableTime: false,\n        enableSeconds: false,\n        noCalendar: false\n      },\n      editObj: {\n        start_date: moment().format(\"YYYY-MM-DD\"),\n        end_date: moment().format(\"YYYY-MM-DD\")\n      }\n    };\n  },\n  computed: {\n    invalid: function invalid() {\n      var _this = this;\n\n      var require = function require(type) {\n        return _this.submitted && _this.editObj[type] == '';\n      };\n\n      return {\n        room_name: require(\"room_name\"),\n        num_chair: require(\"num_chair\"),\n        num_table: require(\"num_table\")\n      };\n    },\n    isInvald: function isInvald() {\n      return this.invalid.room_name || this.invalid.num_chair || this.invalid.num_table;\n    }\n  },\n  created: function created() {\n    this.getdata();\n    this.initVal();\n  },\n  methods: {\n    initVal: function initVal() {\n      this.submitted = false;\n      this.change_password = false;\n      this.editObj = {\n        room_name: \"\",\n        num_chair: \"\",\n        num_table: \"\"\n      };\n    },\n    delete_booking: function delete_booking(booking) {\n      var _this2 = this;\n\n      this.$swal({\n        title: this.$t('delete_booking_title'),\n        text: this.$t('delete_text'),\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        cancelButtonText: this.$t('cancel'),\n        confirmButtonText: this.$t('confirm_delete'),\n        showLoaderOnConfirm: true,\n        preConfirm: function preConfirm() {\n          return service.postData(\"/delete_booking\", {\n            booking_id: booking.booking_id\n          }).then(function (result) {\n            return result;\n          });\n        }\n      }).then(function (result) {\n        if (result.value) {\n          if (result.value.code) {\n            _this2.$swal(_this2.$t(\"deleted_title\"), \"\", \"success\").then(function (result) {\n              _this2.getdata();\n\n              _this2.forceRerender();\n\n              _this2.initVal();\n            });\n          } else {\n            _this2.$swal(result.value.message, '', 'error');\n          }\n        }\n      });\n    },\n    reject: function reject(booking) {\n      var _this3 = this;\n\n      this.$swal({\n        title: this.$t('reject_booking_title'),\n        text: this.$t('reject_text'),\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        cancelButtonText: this.$t('cancel'),\n        confirmButtonText: this.$t('confirm_delete'),\n        showLoaderOnConfirm: true,\n        preConfirm: function preConfirm() {\n          return service.postData(\"/reject\", {\n            booking_id: booking.booking_id\n          }).then(function (result) {\n            return result;\n          });\n        }\n      }).then(function (result) {\n        if (result.value) {\n          if (result.value.code) {\n            _this3.$swal(_this3.$t(\"rejected_title\"), \"\", \"success\").then(function (result) {\n              _this3.getdata();\n\n              _this3.forceRerender();\n\n              _this3.initVal();\n            });\n          } else {\n            _this3.$swal(result.value.message, '', 'error');\n          }\n        }\n      });\n    },\n    approve: function approve(booking) {\n      var _this4 = this;\n\n      this.$swal({\n        title: this.$t('approve_booking_title'),\n        text: this.$t('approve_text'),\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        cancelButtonText: this.$t('cancel'),\n        confirmButtonText: this.$t('confirm_delete'),\n        showLoaderOnConfirm: true,\n        preConfirm: function preConfirm() {\n          return service.postData(\"/approve\", {\n            booking_id: booking.booking_id\n          }).then(function (result) {\n            return result;\n          });\n        }\n      }).then(function (result) {\n        if (result.value) {\n          if (result.value.code) {\n            _this4.$swal(_this4.$t(\"approved_title\"), \"\", \"success\").then(function (result) {\n              _this4.getdata();\n\n              _this4.forceRerender();\n\n              _this4.initVal();\n            });\n          } else {\n            _this4.$swal(result.value.message, '', 'error');\n          }\n        }\n      });\n    },\n    getdata: function getdata() {\n      var _this5 = this;\n\n      service.postData(\"/get_booked\", {}).then(function (result) {\n        _this5.bookings = result.data;\n      });\n    },\n    search: function search() {\n      var _this6 = this;\n\n      this.$vs.loading({\n        background: this.backgroundLoading,\n        color: this.colorLoading,\n        container: \"#button-with-loading\",\n        scale: 0.45\n      });\n      this.searched = false;\n      var _this$editObj = this.editObj,\n          start_date = _this$editObj.start_date,\n          end_date = _this$editObj.end_date;\n      start_date += \" 00:00:00\";\n      end_date += \" 23:59:59\";\n      var username = service.getUser().user.username;\n      service.postData(\"get_user_booking_history\", {\n        start_date: start_date,\n        end_date: end_date,\n        username: username\n      }).then(function (result) {\n        _this6.bookings = result.data;\n        _this6.searched = true;\n\n        _this6.$vs.loading.close(\"#button-with-loading > .con-vs-loading\");\n      }, function (err) {\n        _this6.$vs.loading.close(\"#button-with-loading > .con-vs-loading\");\n\n        _this6.searched = true;\n      });\n    },\n    forceRerender: function forceRerender() {\n      var _this7 = this;\n\n      this.renderComponent = false;\n      this.$nextTick(function () {\n        _this7.renderComponent = true;\n      });\n    },\n    save: function save() {\n      var _this8 = this;\n\n      this.submitted = true;\n\n      if (!this.isInvald) {\n        if (this.popupActive) {\n          this.$vs.loading({\n            background: this.backgroundLoading,\n            color: this.colorLoading,\n            container: \"#button-with-loading1\",\n            scale: 0.45\n          });\n        } else {\n          this.$vs.loading({\n            background: this.backgroundLoading,\n            color: this.colorLoading,\n            container: \"#button-with-loading\",\n            scale: 0.45\n          });\n        }\n\n        service.postData('/upsert_room', this.editObj).then(function (result) {\n          if (_this8.popupActive) _this8.$vs.loading.close(\"#button-with-loading1 > .con-vs-loading\");else _this8.$vs.loading.close(\"#button-with-loading > .con-vs-loading\");\n          _this8.popupActive = false;\n\n          _this8.$swal(_this8.$t(\"success_title\"), \"\", \"success\").then(function (result) {\n            _this8.getdata();\n\n            _this8.forceRerender();\n          });\n        }, function (err) {\n          _this8.popupActive = false;\n        });\n      }\n    }\n  },\n  watch: {}\n};",{"version":3,"sources":["my_booking_history.vue"],"names":[],"mappings":"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","sourcesContent":["<template >\r\n  <div class=\"vx-col w-full mb-base\" v-if=\"renderComponent\">\r\n\r\n    <!-- <edit-user :isSidebarActive=\"sideBarActive\" :operator=\"edit_operator\" @closeSidebar=\"sideBarActive = false\" /> -->\r\n    <vx-card>\r\n       <h6>{{$t(\"search_booking_history\")}}</h6>\r\n\r\n      <div class=\"mt-6 vx-row mb-6\">\r\n        <div class=\"vx-col md:w-1/6\" style=\"text-align:right;padding-top:3px\">\r\n          <label>{{$t(\"start_datetime\")}}</label>\r\n\r\n        </div>\r\n        <div class=\"vx-col md:w-1/5\">\r\n          <flat-pickr :config=\"configdateTimePicker\" class=\"w-full\" v-model=\"editObj.start_date\" placeholder=\"Choose time\" />\r\n        </div>\r\n        <div class=\"vx-col md:w-1/6\" style=\"text-align:right;padding-top:3px\">\r\n          <label>{{$t(\"end_datetime\")}}</label>\r\n\r\n        </div>\r\n        <div class=\"vx-col md:w-1/5\">\r\n          <flat-pickr :config=\"configdateTimePicker\" class=\"w-full\" v-model=\"editObj.end_date\" placeholder=\"Choose time\" />\r\n        </div>\r\n        <div class=\"vx-col md:w-1/6\">\r\n          <vs-button ref=\"loadableButton\" id=\"button-with-loading\" class=\"vs-con-loading__container right\" vslor=\"primary\" @click=\"search()\">{{$t('search')}}</vs-button>\r\n        </div>\r\n\r\n      </div>\r\n    </vx-card>\r\n    <vx-card v-if=\"searched\" class=\"mt-5\">\r\n        <!-- <pre>{{x}}</pre> -->\r\n\r\n        <vs-table pagination max-items=\"10\" search :data=\"bookings\">\r\n\r\n                    <template slot=\"thead\">\r\n                      <vs-th sort-key=\"booking_id\">{{$t('booking_id')}}</vs-th>\r\n\r\n                      <vs-th sort-key=\"first_name+last_name\">{{$t(\"first_surname\")}}</vs-th>\r\n                      <vs-th sort-key=\"room_name\">{{$t('room_name')}}</vs-th>\r\n                      <vs-th sort-key=\"booking_description\">{{$t('booking_description')}}</vs-th>\r\n                      <vs-th sort-key=\"start_date\">{{$t('start_date')}}</vs-th>\r\n                      <vs-th sort-key=\"end_date\">{{$t('end_date')}}</vs-th>\r\n                       <vs-th sort-key=\"status_name\">{{$t('status_name')}}</vs-th>\r\n                    </template>\r\n\r\n                    <template slot-scope=\"{data}\">\r\n                      <vs-tr :data=\"tr\" :key=\"index\" v-for=\"(tr, index) in data\">\r\n                        <vs-td :data=\"tr.booking_id\">\r\n                          {{ tr.booking_id}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.first_name+tr.last_name\" width=\"200px\">\r\n                          {{tr.first_name+' '+tr.last_name}}\r\n                        </vs-td>\r\n\r\n\r\n                        <vs-td :data=\"tr.room_name\">\r\n                          {{ tr.room_name}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.booking_description\">\r\n                          {{ tr.booking_description}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.start_date\">\r\n                          {{ tr.start_date | formatDate}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.end_date\">\r\n                          {{ tr.end_date | formatDate}}\r\n                        </vs-td>\r\n\r\n                       <vs-td :data=\"tr.status_name\" :class=\"'A'+tr.status_id\">\r\n                          {{ $t(tr.status_name)}}\r\n                        </vs-td>\r\n\r\n                      </vs-tr>\r\n                    </template>\r\n                  </vs-table>\r\n    </vx-card>\r\n  </div>\r\n  <!-- <button>click</button> -->\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n  .right{\r\n    float:right;\r\n    margin-right:10px;\r\n  }\r\n  .require{\r\n    color: red;\r\n  }\r\n\r\n  .danger input {\r\n    padding: .7rem;\r\n    font-size: 1rem;\r\n    border-radius: 5px;\r\n    border: 1px solid red;\r\n    color: #626262;\r\n    width: 100%;\r\n  }\r\n   .error{\r\n    color:red;\r\n     font-size:80%;\r\n  }\r\n  .A0{\r\n    color:red;\r\n  }\r\n  .A1{\r\n    color:orange;\r\n  }\r\n  .A2{\r\n    color:green;\r\n  }\r\n  .A3{\r\n    color:gray;\r\n  }\r\n</style>\r\n\r\n\r\n<script>\r\nimport Datepicker from 'vuejs-datepicker';\r\nimport service from '@/service/service';\r\nimport EditUser from './extra-components/edit-user.vue';\r\n// import ViewData from './view/ViewData.vue';\r\nimport moment from 'moment';\r\n// import firebase from 'firebase/app'ว\r\n// import * as firebase from 'firebase/app';\r\n\r\n// import '@firebase/messaging';\r\nimport flatPickr from 'vue-flatpickr-component';\r\nimport 'flatpickr/dist/flatpickr.css';\r\nexport default {\r\n  components: {\r\n    EditUser,\r\n    Datepicker,\r\n    flatPickr\r\n  },\r\n   data(){\r\n      return {\r\n        change_password:false,\r\n        renderComponent:true,\r\n        popupActive:false,\r\n        bookings:[],\r\n        roles:[],\r\n        searched:false,\r\n        submitted:false,\r\n         configdateTimePicker: {\r\n              enableTime: false,\r\n              enableSeconds: false,\r\n              noCalendar: false\r\n            },\r\n        editObj:{\r\n          start_date:moment().format(\"YYYY-MM-DD\"),\r\n          end_date:moment().format(\"YYYY-MM-DD\")\r\n        }\r\n      }\r\n   },\r\n\r\n   computed:{\r\n     invalid(){\r\n       var require=type=>this.submitted&&this.editObj[type]=='';\r\n       return {\r\n              room_name:require(\"room_name\"),\r\n              num_chair:require(\"num_chair\"),\r\n              num_table:require(\"num_table\")\r\n         }\r\n     },\r\n     isInvald(){\r\n        return this.invalid.room_name||this.invalid.num_chair||this.invalid.num_table\r\n      }\r\n   },\r\n   created(){\r\n      this.getdata();\r\n      this.initVal();\r\n   },\r\n   methods: {\r\n     initVal(){\r\n       this.submitted=false;\r\n       this.change_password=false;\r\n       this.editObj={\r\n          room_name:\"\",\r\n          num_chair:\"\",\r\n          num_table:\"\"\r\n        }\r\n     },\r\n\r\n     delete_booking(booking){\r\n       this.$swal({\r\n          title:this.$t('delete_booking_title'),\r\n          text: this.$t('delete_text'),\r\n          type: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#3085d6',\r\n          cancelButtonColor: '#d33',\r\n          cancelButtonText:this.$t('cancel'),\r\n          confirmButtonText:this.$t('confirm_delete'),\r\n          showLoaderOnConfirm: true,\r\n          preConfirm:()=>{\r\n            return  service.postData(\"/delete_booking\",{booking_id:booking.booking_id}).then((result)=>{\r\n               return result;\r\n            })\r\n\r\n          }\r\n        }).then((result) => {\r\n          if(result.value){\r\n            if(result.value.code){\r\n                this.$swal(this.$t(\"deleted_title\"),\"\",\"success\").then((result)=>{\r\n                    this.getdata();\r\n                    this.forceRerender();\r\n                    this.initVal();\r\n                });\r\n              }else{\r\n                 this.$swal(result.value.message,'','error')\r\n              }\r\n\r\n          }\r\n        })\r\n\r\n     },\r\n     reject(booking){\r\n       this.$swal({\r\n          title:this.$t('reject_booking_title'),\r\n          text: this.$t('reject_text'),\r\n          type: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#3085d6',\r\n          cancelButtonColor: '#d33',\r\n          cancelButtonText:this.$t('cancel'),\r\n          confirmButtonText:this.$t('confirm_delete'),\r\n          showLoaderOnConfirm: true,\r\n          preConfirm:()=>{\r\n            return  service.postData(\"/reject\",{booking_id:booking.booking_id}).then((result)=>{\r\n               return result;\r\n            })\r\n\r\n          }\r\n        }).then((result) => {\r\n          if(result.value){\r\n            if(result.value.code){\r\n                this.$swal(this.$t(\"rejected_title\"),\"\",\"success\").then((result)=>{\r\n                    this.getdata();\r\n                    this.forceRerender();\r\n                    this.initVal();\r\n                });\r\n              }else{\r\n                 this.$swal(result.value.message,'','error')\r\n              }\r\n\r\n          }\r\n        })\r\n\r\n     },\r\n     approve(booking){\r\n       this.$swal({\r\n          title:this.$t('approve_booking_title'),\r\n          text: this.$t('approve_text'),\r\n          type: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#3085d6',\r\n          cancelButtonColor: '#d33',\r\n          cancelButtonText:this.$t('cancel'),\r\n          confirmButtonText:this.$t('confirm_delete'),\r\n          showLoaderOnConfirm: true,\r\n          preConfirm:()=>{\r\n            return  service.postData(\"/approve\",{booking_id:booking.booking_id}).then((result)=>{\r\n               return result;\r\n            })\r\n\r\n          }\r\n        }).then((result) => {\r\n          if(result.value){\r\n            if(result.value.code){\r\n                this.$swal(this.$t(\"approved_title\"),\"\",\"success\").then((result)=>{\r\n                    this.getdata();\r\n                    this.forceRerender();\r\n                    this.initVal();\r\n                });\r\n              }else{\r\n                 this.$swal(result.value.message,'','error')\r\n              }\r\n\r\n          }\r\n        })\r\n\r\n     },\r\n     getdata(){\r\n\r\n       service.postData(\"/get_booked\",{\r\n\r\n          }).then((result)=>{\r\n            this.bookings=result.data;\r\n          })\r\n     },\r\n     search(){\r\n       this.$vs.loading({\r\n            background: this.backgroundLoading,\r\n            color: this.colorLoading,\r\n            container: \"#button-with-loading\",\r\n            scale: 0.45\r\n          })\r\n       this.searched=false;\r\n       var {start_date,end_date}=this.editObj;\r\n       start_date+=\" 00:00:00\";\r\n       end_date+=\" 23:59:59\";\r\n       var {username}=service.getUser().user;\r\n        service.postData(\"get_user_booking_history\",{\r\n          start_date,end_date,username\r\n        }).then((result)=>{\r\n          this.bookings=result.data;\r\n          this.searched=true;\r\n           this.$vs.loading.close(\"#button-with-loading > .con-vs-loading\")\r\n        },err=>{\r\n          this.$vs.loading.close(\"#button-with-loading > .con-vs-loading\")\r\n          this.searched=true;\r\n        })\r\n     },\r\n     forceRerender(){\r\n       this.renderComponent=false;\r\n       this.$nextTick(() => {\r\n          this.renderComponent = true;\r\n        });\r\n     },\r\n     save(){\r\n      this.submitted=true;\r\n       if(!this.isInvald){\r\n         if(this.popupActive){\r\n           this.$vs.loading({\r\n            background: this.backgroundLoading,\r\n            color: this.colorLoading,\r\n            container: \"#button-with-loading1\",\r\n            scale: 0.45\r\n          })\r\n\r\n         }else{\r\n           this.$vs.loading({\r\n            background: this.backgroundLoading,\r\n            color: this.colorLoading,\r\n            container: \"#button-with-loading\",\r\n            scale: 0.45\r\n          })\r\n\r\n         }\r\n\r\n       service.postData('/upsert_room',this.editObj).then((result)=>{\r\n            if(this.popupActive) this.$vs.loading.close(\"#button-with-loading1 > .con-vs-loading\")\r\n            else this.$vs.loading.close(\"#button-with-loading > .con-vs-loading\")\r\n            this.popupActive=false;\r\n            this.$swal(this.$t(\"success_title\"),\"\",\"success\").then((result)=>{\r\n\r\n\r\n              this.getdata();\r\n              this.forceRerender();\r\n\r\n           });\r\n          },err=>{\r\n             this.popupActive=false;\r\n          })\r\n       }\r\n     }\r\n    },\r\n  watch: {\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n"],"sourceRoot":"src/views"}]}